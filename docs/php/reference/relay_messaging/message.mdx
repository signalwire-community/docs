---
sidebar_label: Message
---

# Relay.Messaging.Message

An object representing an SMS or MMS message. It is the parameter of both [`onIncomingMessage`](php/reference/relay_consumer.mdx#onincomingmessage) and [`onMessageStateChange`](php/reference/relay_consumer.mdx#onmessagestatechange) Consumer handlers.

## Properties

|             |                                                |                                                                                                                                                                     |
| ----------: | ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|        `id` | <span class="method-prop-type">string</span>   | The unique identifier of the message.                                                                                                                               |
|   `context` | <span class="method-prop-type">string</span>   | The context of the message.                                                                                                                                         |
|      `from` | <span class="method-prop-type">string</span>   | The phone number the message comes from.                                                                                                                            |
|        `to` | <span class="method-prop-type">string</span>   | The destination number of the message.                                                                                                                              |
| `direction` | <span class="method-prop-type">string</span>   | The direction of the message: `inbound` or `outbound`.                                                                                                              |
|     `state` | <span class="method-prop-type">string</span>   | The current state of the message. See [`Relay.Messaging.Message` State Events](php/reference/relay_messaging/message.mdx#state-events) for all the possible states. |
|      `body` | <span class="method-prop-type">string</span>   | The content of the message.                                                                                                                                         |
|     `media` | <span class="method-prop-type">string[]</span> | Array of URLs media.                                                                                                                                                |
|      `tags` | <span class="method-prop-type">string[]</span> | Array of strings with message tags.                                                                                                                                 |
|  `segments` | <span class="method-prop-type">number</span>   | Number of segments of the message.                                                                                                                                  |
|    `reason` | <span class="method-prop-type">string</span>   | Reason why the message was not sent.<br/> _Present only in case of failure._                                                                                        |

## Events

### State Events

To track the state of a message.

|               |                                                                                                                                                                                |
| ------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|      `queued` | The message has been queued in Relay.                                                                                                                                          |
|   `initiated` | Relay has initiate the process to send the message.                                                                                                                            |
|        `sent` | Relay has sent the message.                                                                                                                                                    |
|   `delivered` | The message has been successfully delivered. Due to the nature of SMS and MMS, receiving a `delivered` event is not guaranteed, even if the message is delivered successfully. |
| `undelivered` | The message has not been delivered. Due to the nature of SMS and MMS, receiving a `undelivered` event is not guaranteed, even if the message fails to be delivered.            |
|      `failed` | The call has failed.                                                                                                                                                           |
